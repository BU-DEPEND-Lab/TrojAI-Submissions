Bootstrap: docker
From: pytorch/pytorch:1.11.0-cuda11.3-cudnn8-runtime

%files
    ./example_trojan_detector.py /
    ./metaparameters.json /
    ./metaparameters_schema.json /
    ./learned_parameters /

%post
    # Needed for pycocotools
    apt update
    apt -y install gcc

    pip install torch==1.11 torchvision==0.12
    pip install pycocotools opencv-python jsonschema jsonargparse jsonpickle scipy

%runscript
    exec python3 /example_trojan_detector.py "$@"
